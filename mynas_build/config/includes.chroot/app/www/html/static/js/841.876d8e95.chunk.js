"use strict";(self.webpackChunkmypxe_admin=self.webpackChunkmypxe_admin||[]).push([[841,905,118,583,149],{7905:function(e,t,n){n.r(t);var r=n(42982),a=n(1413),i=n(70885),o=n(72791),s=n(39281),c=n(35527),l=n(79836),u=n(56890),d=n(35855),p=n(53994),f=n(53382),h=n(36151),m=n(89341),v=n(28714),g=n(80184);t.default=function(e){var t=(0,o.useState)([]),n=(0,i.Z)(t,2),x=n[0],Z=n[1],_=(0,o.useState)([]),b=(0,i.Z)(_,2),w=b[0],j=b[1],k=(0,o.useState)(!0),y=(0,i.Z)(k,2),S=(y[0],y[1],(0,o.useState)(0)),C=(0,i.Z)(S,2),I=C[0],A=C[1],z=(0,o.useState)(10),D=(0,i.Z)(z,2),R=D[0],L=D[1],O=(0,o.useState)({online:!1,status_text:"\u79bb\u7ebf"}),P=(0,i.Z)(O,2),V=(P[0],P[1],(0,o.useState)("")),M=(0,i.Z)(V,2),E=M[0],N=(M[1],x.filter((function(e){return Object.values(e).some((function(e){return e.toString().toLowerCase().includes(E.toLowerCase())}))}))),T=(0,v.useData)(),W=T.global_data;return T.api,(0,o.useEffect)((function(){W.get("blockdevices");var e=function(e){var t=W.get("blockdevices"),n=x,i=e;w.forEach((function(e){var r=i.filter((function(t){return e.path=="/dev/".concat(t.Device)}))[0];if(t){var o=t.filter((function(t){return t.path===e.path}))[0];if(r&&o){var s=n.findIndex((function(t){return t.path==e.path}));s>=0?n.splice(s,1,(0,a.Z)((0,a.Z)({},o),{},{id:e.path},r)):n.push((0,a.Z)((0,a.Z)({},o),{},{id:e.path},r))}}})),Z((0,r.Z)(n))};return W.watch("sysstat",e),Z(w),function(){W.unwatch("sysstat",e)}}),[w]),(0,o.useEffect)((function(){console.log("props===",e),e.data&&j(e.data)}),[e.data]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.Z,{component:c.Z,children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(u.Z,{children:(0,g.jsxs)(d.Z,{children:[(0,g.jsx)(p.Z,{children:"\u8bbe\u5907"}),(0,g.jsx)(p.Z,{children:"PATH"}),(0,g.jsx)(p.Z,{children:"\u6807\u8bc6"}),(0,g.jsx)(p.Z,{children:"\u5bb9\u91cf"}),(0,g.jsx)(p.Z,{children:"\u8bfb\u53d6"}),(0,g.jsx)(p.Z,{children:"\u5199\u5165"})]})}),(0,g.jsx)(f.Z,{children:N.slice(I*R,I*R+R).map((function(t){return(0,g.jsxs)(d.Z,{children:[(0,g.jsxs)(p.Z,{children:[e.onDown&&(0,g.jsx)(h.Z,{onClick:function(){return e.onDown(t)},children:"\u4e0b\u7ebf"}),e.onAdd&&e.check_add_status&&e.check_add_status(t)&&(0,g.jsx)(h.Z,{onClick:function(){return e.onAdd(t)},children:"\u6dfb\u52a0\u5230\u6c60"}),e.onRemove&&(0,g.jsx)(h.Z,{onClick:function(){return e.onRemove(t)},children:"\u79fb\u9664"})]}),(0,g.jsx)(p.Z,{children:t.path}),(0,g.jsxs)(p.Z,{children:[t.model," ",t.serial," ",t.size]}),(0,g.jsx)(p.Z,{children:t.size}),(0,g.jsx)(p.Z,{children:t["kB_read/s"]}),(0,g.jsx)(p.Z,{children:t["kB_wrtn/s"]})]},t.path)}))})]})}),(0,g.jsx)(m.Z,{component:"div",count:N.length,page:I,onPageChange:function(e,t){A(t)},rowsPerPage:R,onRowsPerPageChange:function(e){L(parseInt(e.target.value,10)),A(0)},style:{marginTop:"1rem"}})]})}},16118:function(e,t,n){n.r(t);var r=n(1413),a=n(70885),i=n(15671),o=n(43144),s=n(60136),c=n(98557),l=n(72791),u=n(1250),d=n(28714),p=n(19935),f=n(19218),h=n(80184),m=window.JSONEditor,v=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"build",value:function(){var e=this,t=(this.value,this);this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title);var n=this.options.disks;this.disks=n;var i=document.createElement("div");this.container.append(i),this.view_root=u.createRoot(i),this.rix_init_flag=!1;var o=function(t,n){t.preventDefault(),e.setValue(n,!1,!1)};if(this.used_disks=(0,d.rix_make_watch_data)({used:[],cur_path:""}),this.parent.parent&&this.parent.parent.schema.uniqueItems){var s=this.parent.parent;this.jsoneditor.watch(s.path,(function(){var t=s.getValue().map((function(e){return e.path}));e.used_disks.set("used",t)}))}this.set_model=function(e){if(t.parent&&t.parent.jsoneditor){var n=t.parent.jsoneditor.getEditor(t.parent.path+".model");if(n&&t.disks){var r=e,a=t.disks.filter((function(e){return e.path==r}))[0];a&&n.setValue(a.model)}}},this.used_disks.watch("cur_path",this.set_model);var c=this.defaults.global_data,m=function(){var t=(0,l.useState)([]),i=(0,a.Z)(t,2),s=i[0],u=i[1],d=(0,l.useState)(""),m=(0,a.Z)(d,2),v=m[0],g=m[1];return n||(n=c.get("blockdevices")),e.disks=n,(0,l.useEffect)((function(){var t=function(e){var t=n.map((function(e){return e.path}));t=t.filter((function(t){return 0==e.filter((function(e){return e==t})).length})),u(t)};e.used_disks.watch("used",t);var r;return t(e.used_disks.get("used")),r=e.used_disks.get("cur_path"),g(r),e.set_model(r),function(){e.used_disks.unwatch("used",t)}}),[]),(0,h.jsx)(p.Z,{freeSolo:!0,value:v,onChange:o,options:s,getOptionLabel:function(e){var t=n.filter((function(t){return t.path==e}))[0];return t?"".concat(t.model,"(").concat(t.size,") at ").concat(t.path):""},renderInput:function(e){return(0,h.jsx)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"\u9009\u62e9\u78c1\u76d8"}))}})};this.view_root.render((0,h.jsx)(m,{}))}},{key:"setValue",value:function(e,t,n){this.value=e,this.refreshValue(),this.used_disks.set("cur_path",e),this.onChange(!0)}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){var e=this;this.used_disks.unwatch(this.set_model),setTimeout((function(){e.view_root.unmount()}))}}]),n}(m.AbstractEditor),g=(0,l.forwardRef)((function(e,t){var n=e.schema,a=(e.callbacks,(0,l.useRef)(null)),i=(0,l.useRef)(null),o=(0,d.useData)().global_data;m.defaults.editors.disk_select=v,m.defaults.global_data=o,m.defaults.resolvers.unshift((function(e){if("string"===e.type&&"disk_select"===e.format)return"disk_select"})),(0,l.useEffect)((function(){var t=(0,r.Z)({schema:n,theme:"bootstrap4"},e.options);return a.current=new m(i.current,t),a.current.on("ready",(function(){e.data&&a.current.setValue(e.data)})),function(){a.current&&a.current.destroy()}}),[n,e]);var s=function(){return a.current.getValue()};return(0,l.useImperativeHandle)(t,(function(){return{getValue:s}})),(0,h.jsx)("div",(0,r.Z)({ref:i},e))}));t.default=g},70583:function(e,t,n){n.r(t);var r=n(74165),a=n(15861),i=n(70885),o=n(72791),s=n(36151),c=n(76149),l=n(28714),u=n(7905),d=n(80184);t.default=function(e){var t=e.data;console.log("pool=",t);var n=(0,l.useData)(),p=n.global_data,f=n.api,h=(0,o.useState)([]),m=(0,i.Z)(h,2),v=m[0],g=m[1];(0,o.useEffect)((function(){g(e.data.label)}),[e.data]);var x=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.run_command(c.default.device.evacuate({device:n.path,mount_path:t.mount_path}));case 2:if(0!=e.sent.ret){e.next=17;break}return e.next=6,f.run_command(c.default.device.remove({device:n.path,mount_path:t.mount_path}));case 6:if(0!=e.sent.ret){e.next=17;break}return(a=t.label.findIndex((function(e){return e.path==n.path})))>=0&&t.label.splice(a,1),i=p.get("pools"),(a=i.findIndex((function(e){return e.name===t.name})))>=0&&i.splice(a,1,t),e.next=15,f.config_file({filename:"config/pools.config",op:"put",data:JSON.stringify(i)});case 15:0==e.sent.ret&&(g(t.label),p.set("pools",i));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,o.useState)({online:!1,status_text:"\u79bb\u7ebf"}),n=(0,i.Z)(e,2),l=n[0],u=n[1],p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mount_path,e.next=3,f.run_command(c.default.fs.usage(n));case 3:0==(a=e.sent).ret?(a.data.stdout.split("\n"),u({online:!0,status_text:"\u5728\u7ebf"})):u({online:!1,status_text:"\u79bb\u7ebf"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,f.run_command(c.default.mount(t));case 3:return e.sent,e.next=6,p();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,f.run_command(c.default.umount(t));case 3:return e.sent,e.next=6,p();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=setInterval((function(){p()}),6e4);return p(),function(){clearInterval(e)}}),[]),(0,d.jsxs)("div",{children:["\u540d\u79f0:",t.name," \u6302\u8f7d\u4f4d\u7f6e: ",t.mount_path," \u72b6\u6001:",l.online&&(0,d.jsx)(s.Z,{onClick:m,children:"\u5378\u8f7d"}),!l.online&&(0,d.jsx)(s.Z,{onClick:h,children:"\u6302\u8f7d"})]})};return(0,d.jsxs)("div",{children:[(0,d.jsx)(Z,{}),(0,d.jsx)(u.default,{data:v,onDown:function(e){console.log("down==",e)},onRemove:x}),";"]})}},87841:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var r=n(37762),a=n(74165),i=n(15861),o=n(70885),s=n(1413),c=n(72791),l=n(39157),u=n(84395),d=n(5289),p=n(65661),f=n(97123),h=n(36151),m=n(34663),v=n(13400),g=n(20890),x=n(98530),Z=n(9953),_=n(63366),b=n(87462),w=n(28182),j=n(94419),k=n(48),y=n(66934),S=n(31402),C=n(90133),I=n(80184),A=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],z=(0,y.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((function(e){var t=e.theme,n=e.ownerState;return(0,b.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,k.Fq)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(e){var t=e.theme,n=e.ownerState;return(0,b.Z)({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(function(e){var t=e.theme,n=e.ownerState;return(0,b.Z)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat((t.vars||t).palette.divider),transform:"translateX(0%)"}})}),(function(e){var t=e.ownerState;return(0,b.Z)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),D=(0,y.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(e,t){var n=e.ownerState;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((function(e){var t=e.theme,n=e.ownerState;return(0,b.Z)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),R=c.forwardRef((function(e,t){var n=(0,S.Z)({props:e,name:"MuiDivider"}),r=n.absolute,a=void 0!==r&&r,i=n.children,o=n.className,s=n.component,c=void 0===s?i?"div":"hr":s,l=n.flexItem,u=void 0!==l&&l,d=n.light,p=void 0!==d&&d,f=n.orientation,h=void 0===f?"horizontal":f,m=n.role,v=void 0===m?"hr"!==c?"separator":void 0:m,g=n.textAlign,x=void 0===g?"center":g,Z=n.variant,k=void 0===Z?"fullWidth":Z,y=(0,_.Z)(n,A),R=(0,b.Z)({},n,{absolute:a,component:c,flexItem:u,light:p,orientation:h,role:v,textAlign:x,variant:k}),L=function(e){var t=e.absolute,n=e.children,r=e.classes,a=e.flexItem,i=e.light,o=e.orientation,s=e.textAlign,c={root:["root",t&&"absolute",e.variant,i&&"light","vertical"===o&&"vertical",a&&"flexItem",n&&"withChildren",n&&"vertical"===o&&"withChildrenVertical","right"===s&&"vertical"!==o&&"textAlignRight","left"===s&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,j.Z)(c,C.V,r)}(R);return(0,I.jsx)(z,(0,b.Z)({as:c,className:(0,w.default)(L.root,o),role:v,ref:t,ownerState:R},y,{children:i?(0,I.jsx)(D,{className:L.wrapper,ownerState:R,children:i}):null}))})),L=n(90493),O=n(84852),P=n(57064),V=n(49900),M=n(99059),E=n(7607),N=n(54982),T=n(45675),W=n(52118),F=n(96739),q=(0,n(76189).Z)((0,I.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft"),B=n(92392),J=n(16614),H=n(28714),$=n(7905),G=n(70583),X=n(16118),Y=n(76149),K=240,Q=(0,M.Z)(l.Z)({width:"80%"}),U=(0,M.Z)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return(0,s.Z)({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(K,"px")},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})})),ee=(0,M.Z)(u.Z,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return(0,s.Z)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(K,"px)"),marginLeft:"".concat(K,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),te=(0,M.Z)("div")((function(e){var t=e.theme;return(0,s.Z)((0,s.Z)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})),ne=function(e){var t=(0,H.useData)(),n=t.global_data,l=t.api,u=(0,c.useState)({disks:[],pools:[],drawOpen:!1,all_disk:!0,show_pools:!1,openAddDialog:!1,schema:{},data:{id:0,key:"",status:0,type:0,value:"",parent_id:0}}),_=(0,o.Z)(u,2),b=_[0],w=_[1],j=e.onActive,k=e.onClose,y=e.onRestore,S=e.onMaximize,C=e.onMinimize,A=function(e){w((function(t){return(0,s.Z)((0,s.Z)({},t),e)}))};(0,c.useEffect)((function(){var e=function(e){A({pools:e})},t=function(e){A({disks:e})},r=n.get("pools",[],(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.config_file({filename:"config/pools.config",op:"get"});case 2:0==(t=e.sent).ret&&(r=JSON.parse(t.data),n.set("pools",r));case 4:case"end":return e.stop()}}),e)}))));return A({pools:r}),l.disk_info({}),n.watch("blockdevices",t),n.watch("pools",e),function(){n.unwatch("blockdevices",t),n.unwatch("pools",e)}}),[]);var z=function(){var e,t=[],n=(0,r.Z)(b.pools);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push((0,I.jsx)(G.default,{data:a},a))}}catch(i){n.e(i)}finally{n.f()}return t},D=(0,c.useRef)(null),M=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,i,o,c,u,d,p,f,h,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=D.current.getValue(),r=b.pools,e.t0=t.op,e.next="add_device_to_pool"===e.t0?6:"addpool"===e.t0?21:42;break;case 6:return console.log("add device to pool",t),i=r.findIndex((function(e){return e.name==t.pool})),o=null,i>=0&&(o=r[i]),e.next=12,l.run_command((0,s.Z)({},Y.default.device.add((0,s.Z)((0,s.Z)({},t),{},{mount_path:o.mount_path}))));case 12:if(0!=e.sent.ret){e.next=20;break}return(c=o.label.findIndex((function(e){return e.path==t.device})))>=0?o.label.splice(c,1,(0,s.Z)((0,s.Z)({},o.label[c]),{},{name:t.label,path:t.device})):o.label.push({name:t.label,path:t.device}),e.next=18,l.config_file({filename:"config/pools.config",op:"put",data:JSON.stringify(r)});case 18:0==e.sent.ret&&(n.set("pools",r),A({openAddDialog:!1}));case 20:return e.abrupt("break",42);case 21:return e.next=23,l.run_command((0,s.Z)((0,s.Z)({},Y.default.format(t)),{},{config:t}));case 23:if(u=e.sent,console.log("format_ret===",u),0!=u.ret){e.next=41;break}return d=t.name,(f=(p=r).findIndex((function(e){return e.name==d})))>=0?p.split(f,1,t):p.push(t),n.set("pools",p),e.next=33,l.config_file({op:"put",filename:"config/pools.config",data:JSON.stringify(p)});case 33:if(0==(h=e.sent).ret&&console.log("write_config ok=",h),1!=t.auto_mount){e.next=40;break}return e.next=38,l.run_command((0,s.Z)((0,s.Z)({},Y.default.mount(t)),{},{config:t}));case 38:m=e.sent,console.log("mount_ret===",m);case 40:A({openAddDialog:!1});case 41:return e.abrupt("break",42);case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(0),console.error("Error saving parameter:",e.t1);case 47:case"end":return e.stop()}}),e,null,[[0,44]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=function(){A({openAddDialog:!b.openAddDialog})};return(0,I.jsxs)(d.Z,{open:b.openAddDialog,onClose:e,fullWidth:!0,maxWidth:"md",children:[(0,I.jsx)(p.Z,{children:"\u6dfb\u52a0\u53c2\u6570"}),(0,I.jsx)(Q,{children:(0,I.jsx)(X.default,{schema:b.schema,ref:D})}),(0,I.jsxs)(f.Z,{children:[(0,I.jsx)(h.Z,{onClick:M,children:"\u4fdd\u5b58"}),(0,I.jsx)(h.Z,{onClick:e,children:"\u53d6\u6d88"})]})]})};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ee,{open:b.drawOpen,sx:{position:"relative"},children:(0,I.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,I.jsx)(v.Z,{edge:"start",color:"inherit",onClick:function(){A({drawOpen:!b.drawOpen})},sx:(0,s.Z)({mr:2},b.drawOpen&&{display:"none"}),children:(0,I.jsx)(E.Z,{})}),(0,I.jsx)(g.Z,{variant:"h6",component:"div",sx:{flexGrow:1,cursor:"move"},className:"window-title",onClick:j,children:"\u5b58\u50a8\u8bbe\u7f6e"}),(0,I.jsx)(v.Z,{color:"inherit",onClick:C,children:(0,I.jsx)(N.Z,{})}),e.isMaximized?(0,I.jsx)(v.Z,{color:"inherit",onClick:y,children:(0,I.jsx)(T.Z,{})}):(0,I.jsx)(v.Z,{color:"inherit",onClick:S,children:(0,I.jsx)(W.Z,{})}),(0,I.jsx)(v.Z,{color:"inherit",onClick:k,children:(0,I.jsx)(F.Z,{})})]})}),(0,I.jsxs)(x.Z,{p:2,sx:{display:"flex"},children:[(0,I.jsxs)(Z.ZP,{anchor:"left",open:b.drawOpen,onClose:function(){},sx:{width:K,flexShrink:0,"& .MuiDrawer-paper":{width:K,boxSizing:"border-box"}},variant:"persistent",children:[(0,I.jsx)(te,{children:(0,I.jsx)(v.Z,{onClick:function(){A({drawOpen:!b.drawOpen})},children:(0,I.jsx)(q,{})})}),(0,I.jsx)(R,{}),(0,I.jsxs)(L.Z,{children:[(0,I.jsxs)(O.ZP,{button:!0,onClick:function(){A({all_disk:!0,show_pools:!1})},children:[(0,I.jsx)(P.Z,{children:(0,I.jsx)(B.Z,{})}),(0,I.jsx)(V.Z,{primary:"\u6240\u6709\u78c1\u76d8"})]}),(0,I.jsxs)(O.ZP,{button:!0,onClick:function(){A({all_disk:!1,show_pools:!0})},children:[(0,I.jsx)(P.Z,{children:(0,I.jsx)(J.Z,{})}),(0,I.jsx)(V.Z,{primary:"\u5b58\u50a8\u6c60"})]}),(0,I.jsxs)(O.ZP,{button:!0,onClick:function(e){e.preventDefault(),A({openAddDialog:!0,schema:{$ref:"#/definitions/bcachefs_config",definitions:{bcachefs_label:{type:"array",title:"\u6807\u7b7e\u914d\u7f6e",uniqueItems:!0,items:{type:"object",headerTemplate:"{{self.name}}={{self.path}}",properties:{name:{type:"string",default:"",title:"label_name"},path:{type:"string",format:"disk_select",title:"\u8bbe\u5907"},model:{type:"string",title:"\u786c\u76d8",options:{hidden:!0}}},required:["name","path","model"]}},bcachefs_config:{type:"object",properties:{op:{type:"string",default:"addpool",options:{hidden:!0}},name:{type:"string",title:"\u540d\u79f0",default:"pool"},compression:{type:"string",title:"\u538b\u7f29\u65b9\u5f0f",enum:["none","lz4","gzip","zstd"],default:"none",options:{enum_titles:["none","lz4","gzip","zstd"]}},encrypted:{type:"boolean",title:"\u52a0\u5bc6",default:!1},replicas:{type:"integer",title:"\u6570\u636e\u526f\u672c\u6570\u91cf",default:1},foreground_target:{type:"string",title:"\u524d\u7aef\u8bbe\u5907\u6807\u7b7e",default:""},promote_target:{type:"string",title:"promote_target\u8bbe\u5907\u6807\u7b7e",default:""},background_target:{type:"string",title:"\u540e\u7aef\u8bbe\u5907\u6807\u7b7e",default:""},label:{title:"\u5b58\u50a8\u6807\u7b7e\u8bbe\u7f6e",$ref:"#/definitions/bcachefs_label"},auto_mount:{type:"boolean",title:"\u81ea\u52a8\u6302\u8f7d",default:!1},mount_path:{type:"string",title:"\u6302\u8f7d\u8def\u5f84",default:"/mnt"}},required:["op","name","compression","encrypted","replicas","foreground_target","promote_target","background_target","label","auto_mount","mount_path"]}}}})},children:[(0,I.jsx)(P.Z,{children:(0,I.jsx)(J.Z,{})}),(0,I.jsx)(V.Z,{primary:"\u6dfb\u52a0\u6c60"})]})]})]}),(0,I.jsxs)(U,{open:b.drawOpen,children:[b.show_pools&&(0,I.jsx)(z,{}),b.all_disk&&(0,I.jsx)($.default,{data:b.disks,onAdd:function(e){var t=b.pools.map((function(e){return e.name}));A({openAddDialog:!0,schema:{$ref:"#/definitions/config",definitions:{config:{type:"object",title:"\u52a0\u5165\u5230\u6c60",properties:{op:{type:"string",default:"add_device_to_pool",options:{hidden:!0}},device:{type:"string",default:e.path,options:{hidden:!0}},pool:{type:"string",title:"\u6c60\u540d\u5b57",enum:t,options:{enum_titles:t}},label:{type:"string",title:"\u6807\u7b7e",default:""},fs_size:{type:"string",title:"fs_size",default:""},discard:{type:"boolean",title:"discard",default:!1},bucket:{type:"string",title:"bucket",default:""}},required:["op","device","pool","label","fs_size","discard","bucket"]}}}})},check_add_status:function(e){var t,n=(0,r.Z)(b.pools);try{for(n.s();!(t=n.n()).done;){if(t.value.label.findIndex((function(t){return t.path==e.path}))>=0)return!1}}catch(a){n.e(a)}finally{n.f()}return!0}}),b.openAddDialog&&(0,I.jsx)(ne,{})]})]})]})}},76149:function(e,t,n){n.r(t);var r=n(37762),a={command:"bcachefs",fs:{usage:function(e){var t=[];return t.push("fs"),t.push("usage"),t.push(e),{command:"bcachefs",args:t}}},device:{remove:function(e){var t=[];return t.push("device"),t.push("remove"),t.push(e.device),t.push(e.mount_path),{command:"bcachefs",args:t}},add:function(e){var t=[];return t.push("device"),t.push("add"),e.label&&""!=e.label&&t.push("--label=".concat(e.label)),e.fs_size&&""!=e.fs_size&&t.push("--fs_size=".concat(e.fs_size)),e.discard&&1==e.discard&&t.push("--discard"),e.bucket&&""!=e.bucket&&t.push("--bucket=".concat(e.bucket)),t.push(e.mount_path),t.push(e.device),{command:"bcachefs",args:t}},online:function(e){var t=[];return t.push("device"),t.push("online"),t.push(e.device),{command:"bcachefs",args:t}},offline:function(e){var t=[];return t.push("device"),t.push("offline"),t.push(e.device),{command:"bcachefs",args:t}},evacuate:function(e){var t=[];return t.push("device"),t.push("evacuate"),t.push(e.device),{command:"bcachefs",args:t}}},format:function(e){var t=[];t.push("format"),t.push("--compression=".concat(e.compression)),e.encrypted&&t.push("--encrypted"),t.push("--foreground_target=".concat(e.foreground_target)),t.push("--promote_target=".concat(e.promote_target)),t.push("--background_target=".concat(e.background_target)),t.push("--replicas=".concat(e.replicas));var n,a=(0,r.Z)(e.label);try{for(a.s();!(n=a.n()).done;){var i=n.value;t.push("--label=".concat(i.name)),t.push("".concat(i.path))}}catch(o){a.e(o)}finally{a.f()}return{command:this.command,args:t}},list:function(e){var t=[];return t.push("list"),t.push(e.path),{command:this.command,args:t}},list_journal:function(e){var t=[];return t.push("list_journal"),t.push(e.path),{command:this.command,args:t}},mount:function(e){var t=[];return t.push("-t"),t.push("bcachefs"),t.push(e.label.map((function(e){return e.path})).join(":")),t.push(e.mount_path),{command:"mount",args:t}},umount:function(e){var t=[];return t.push(e.mount_path),{command:"umount",args:t}}};t.default=a},96739:function(e,t,n){var r=n(76189),a=n(80184);t.Z=(0,r.Z)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},92392:function(e,t,n){var r=n(76189),a=n(80184);t.Z=(0,r.Z)((0,a.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home")},16614:function(e,t,n){var r=n(76189),a=n(80184);t.Z=(0,r.Z)((0,a.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings")},57064:function(e,t,n){var r=n(63366),a=n(87462),i=n(72791),o=n(28182),s=n(94419),c=n(66934),l=n(31402),u=n(96014),d=n(66199),p=n(80184),f=["className"],h=(0,c.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((function(e){var t=e.theme,n=e.ownerState;return(0,a.Z)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})})),m=i.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiListItemIcon"}),c=n.className,m=(0,r.Z)(n,f),v=i.useContext(d.Z),g=(0,a.Z)({},n,{alignItems:v.alignItems}),x=function(e){var t=e.alignItems,n=e.classes,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,s.Z)(r,u.f,n)}(g);return(0,p.jsx)(h,(0,a.Z)({className:(0,o.default)(x.root,c),ownerState:g,ref:t},m))}));t.Z=m}}]);
//# sourceMappingURL=841.876d8e95.chunk.js.map