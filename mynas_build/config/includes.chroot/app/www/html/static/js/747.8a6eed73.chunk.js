"use strict";(self.webpackChunkmypxe_admin=self.webpackChunkmypxe_admin||[]).push([[747],{46747:function(e,t,r){r.r(t);var n=r(1413),a=r(74165),s=r(15861),i=r(29439),u=r(47313),o=r(4434),c=r(46817),l=r(10724),d=r(96467),p=r(66149),h=r(33604),f=r(4117),Z=r(69099),v=r(9666),x=r(51629),y=r(70501),j=r(66835),m=r(23477),k=r(24076),g=r(67478),b=r(57861),w=r(99783),S=r(46417);t.default=function(){var e=(0,u.useState)([]),t=(0,i.Z)(e,2),r=t[0],C=t[1],_=(0,u.useState)({id:0,key:"",status:0,type:0,value:"",parent_id:0}),P=(0,i.Z)(_,2),E=P[0],O=P[1],T=(0,u.useState)(!0),A=(0,i.Z)(T,2),F=(A[0],A[1],(0,u.useState)(0)),I=(0,i.Z)(F,2),L=I[0],N=I[1],R=(0,u.useState)(10),V=(0,i.Z)(R,2),W=V[0],q=V[1],z=(0,u.useState)(""),B=(0,i.Z)(z,2),D=B[0],J=B[1],K=(0,u.useState)({type:"object",properties:{id:{type:"integer",title:"ID",readonly:!0},key:{type:"string",title:"Key"},status:{type:"integer",title:"Status",enum:[0,1],options:{enum_titles:["Not available","Available"]}},type:{type:"integer",title:"Type",enum:[0,1,2,3,4],options:{enum_titles:["json","string","number","bool","null"]}},parent_id:{type:"integer",title:"parent_id"},value:{type:"string",title:"Value",format:"json",options:{ace:{theme:"ace/theme/vibrant_ink",tabSize:2,useSoftTabs:!0}}}},required:["key","type","value","parent_id","id","status"]}),$=(0,i.Z)(K,2),G=$[0],H=$[1],M=(0,u.useState)(!1),Q=(0,i.Z)(M,2),U=Q[0],X=Q[1],Y=(0,u.useState)({key:"",value:"",type:"",status:""}),ee=(0,i.Z)(Y,2);ee[0],ee[1];(0,u.useEffect)((function(){ne()}),[]);var te=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this parameter?")){e.next=11;break}return e.prev=1,e.next=4,o.default.deleteParameter({op:"delete",data:{id:t}});case 4:(r=e.sent).ok?ne():console.error("Error deleting parameter:",r.statusText),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error deleting parameter:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),re=(0,u.useRef)(null),ne=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.getParameters(D);case 2:t=e.sent,C(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=r.filter((function(e){return Object.values(e).some((function(e){return e.toString().toLowerCase().includes(D.toLowerCase())}))})),se={},ie=function(){X(!1)},ue=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=re.current.getValue(),e.next=4,o.default.addParameter((0,n.Z)({},t));case 4:(r=e.sent).ok?(ne(),X(!1)):console.error("Error saving parameter:",r.statusText),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error saving parameter:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),oe=(0,l.Z)(d.Z)({width:"80%"});for(var ce in r){var le=r[ce];if(0!=le.status)switch(le.type){case 4:se[le.key]=null;break;case 0:try{se[le.key]=JSON.parse(le.value)}catch(pe){se[le.key]=le.value}break;default:se[le.key]=le.value}}var de=function(e){var t=e.value;if(t.indexOf("${")>=0&&1==e.type)try{var r=Object.keys(se).join(","),n=new Function(r,'"use strict"; return `'.concat(t,"`;")),a=Object.values(se);return n.apply(void 0,a)}catch(pe){return t}return t};return(0,S.jsxs)("div",{children:[(0,S.jsx)(v.Z,{label:"Filter",variant:"outlined",value:D,onChange:function(e){J(e.target.value)},style:{marginBottom:"1rem"}}),(0,S.jsx)(Z.Z,{onClick:function(){var e=G,t=[0],n={enum_titles:[""]};for(var a in r){var s=r[a];1==s.status&&0==s.type&&(t.push(s.id),n.enum_titles.push(s.key))}console.log("obj==",se,t),t.length>0&&(e.properties.parent_id.enum=t,e.properties.parent_id.options=n),H(e),X(!0)},children:"\u6dfb\u52a0"}),(0,S.jsxs)(p.Z,{open:U,onClose:ie,fullWidth:!0,maxWidth:"md",children:[(0,S.jsx)(h.Z,{children:"\u6dfb\u52a0\u53c2\u6570"}),(0,S.jsx)(oe,{children:(0,S.jsx)(c.default,{schema:G,ref:re,data:E})}),(0,S.jsxs)(f.Z,{children:[(0,S.jsx)(Z.Z,{onClick:ue,children:"\u4fdd\u5b58"}),(0,S.jsx)(Z.Z,{onClick:ie,children:"\u53d6\u6d88"})]})]}),(0,S.jsx)(x.Z,{component:y.Z,children:(0,S.jsxs)(j.Z,{children:[(0,S.jsx)(m.Z,{children:(0,S.jsxs)(k.Z,{children:[(0,S.jsx)(g.Z,{children:"\u8bbe\u5907"}),(0,S.jsx)(g.Z,{children:"\u6807\u8bc6"}),(0,S.jsx)(g.Z,{children:"\u6e29\u5ea6"}),(0,S.jsx)(g.Z,{children:"\u8bfb\u53d6"}),(0,S.jsx)(g.Z,{children:"\u5199\u5165"}),(0,S.jsx)(g.Z,{children:"\u9519\u8bef"})]})}),(0,S.jsx)(b.Z,{children:ae.slice(L*W,L*W+W).map((function(e){return(0,S.jsxs)(k.Z,{children:[(0,S.jsxs)(g.Z,{children:[(0,S.jsx)(Z.Z,{onClick:function(){return O(e),console.log("data====",E),void X(!0)},children:"\u7f16\u8f91"}),(0,S.jsx)(Z.Z,{onClick:function(){return te(e.id)},children:"\u5220\u9664"})]}),(0,S.jsx)(g.Z,{children:e.id}),(0,S.jsx)(g.Z,{children:e.key}),(0,S.jsx)(g.Z,{children:de(e)}),(0,S.jsx)(g.Z,{children:e.type}),(0,S.jsx)(g.Z,{children:e.status})]},e.id)}))})]})}),(0,S.jsx)(w.Z,{component:"div",count:ae.length,page:L,onPageChange:function(e,t){N(t)},rowsPerPage:W,onRowsPerPageChange:function(e){q(parseInt(e.target.value,10)),N(0)},style:{marginTop:"1rem"}})]})}}}]);