"use strict";(self.webpackChunkmypxe_admin=self.webpackChunkmypxe_admin||[]).push([[806],{95806:function(n,e,t){t.r(e);var r=t(74165),o=t(15861),c=t(11687);t(28714);var a={docker_config:"./docker",get_config:function(n){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat(e.docker_config,"/").concat(n.title),t.next=3,e.mkdir(o);case 3:return t.sent,t.next=6,c.default.config_file({op:"get",filename:"".concat(o,"/.env")});case 6:return a=t.sent,t.next=9,c.default.config_file({op:"get",filename:"".concat(o,"/docker-compose.yml"),data:n.config});case 9:if(s=t.sent,0!=a.ret||0!=s.ret){t.next=14;break}return t.abrupt("return",{ret:0,env:a,compose:s});case 14:return t.abrupt("return",{ret:-2,env:a,compose:s});case 15:case"end":return t.stop()}}),t)})))()},stop_container:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stdout:null,stderr:null,onerr:null},t=window.location,r={command:"/bin/bash",args:["-c","cd ".concat(n.dir," && docker compose stop")]},o=encodeURIComponent(JSON.stringify(r)),c=new WebSocket(("http:"==t.protocol?"ws://":"wss://")+t.host+"/api/ws/shell?args="+o);c.onopen=function(){c.onclose=function(){c=null},c.onmessage=function(n){console.log(n.data),e.stdout&&e.stdout(n.data)}},c.onerror=function(n){e.onerr&&e.onerr(n),c=null}},start_container:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stdout:null,stderr:null,onerr:null},t=window.location,r={command:"/bin/bash",args:["-c","cd ".concat(n.dir," && docker compose up -d")]},o=encodeURIComponent(JSON.stringify(r)),c=new WebSocket(("http:"==t.protocol?"ws://":"wss://")+t.host+"/api/ws/shell?args="+o);c.onopen=function(){c.onclose=function(){c=null},c.onmessage=function(n){console.log(n.data),e.stdout&&e.stdout(n.data)}},c.onerror=function(n){e.onerr&&e.onerr(n),c=null}},mkdir:function(n){return(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={command:"mkdir",args:["-p",n]},e.next=3,c.default.run_command(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},save_config:function(n){var e=this;return(0,o.Z)((0,r.Z)().mark((function t(){var o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat(e.docker_config,"/").concat(n.title),t.next=3,e.mkdir(o);case 3:return t.sent,t.next=6,c.default.config_file({op:"put",filename:"".concat(o,"/.env"),data:n.env});case 6:return a=t.sent,t.next=9,c.default.config_file({op:"put",filename:"".concat(o,"/docker-compose.yml"),data:n.config});case 9:if(s=t.sent,0!=a.ret||0!=s.ret){t.next=14;break}return t.abrupt("return",{ret:0,env:a,compose:s});case 14:return t.abrupt("return",{ret:-2,env:a,compose:s});case 15:case"end":return t.stop()}}),t)})))()},start:function(){return(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))()},stop:function(){return(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))()},list:function(){return(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})))()},list_all:function(){return(0,o.Z)((0,r.Z)().mark((function n(){var e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={command:"docker",args:["ps","-a"]},n.next=3,c.default.run_command(e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},install:function(){!function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stdout:null,stderr:null,onerr:null,onend:null},t=window.location,r=n,o=encodeURIComponent(JSON.stringify(r)),c=new WebSocket(("http:"==t.protocol?"ws://":"wss://")+t.host+"/api/ws/shell?args="+o);c.onopen=function(){c.onclose=function(){c=null,e.onend&&e.onend()},c.onmessage=function(n){console.log(n.data),e.stdout&&e.stdout(n.data)}},c.onerror=function(n){e.onerr&&e.onerr(n),c=null}}({command:"./scripts/install_docker_debian.sh",args:["docker"]},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stdout:null,stderr:null,onerr:null,onend:null})},check_install:function(){return(0,o.Z)((0,r.Z)().mark((function n(){var e;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={command:"which",args:["docker"]},n.next=3,c.default.run_command(e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}};e.default=a}}]);
//# sourceMappingURL=806.9630cccb.chunk.js.map