"use strict";(self.webpackChunkmypxe_admin=self.webpackChunkmypxe_admin||[]).push([[475,113,118,605,251],{55113:function(t,e,n){n.r(e);var r=n(72791),a=n(84395),s=n(34663),i=n(20890),u=n(13400),o=n(54982),c=n(45675),l=n(52118),f=n(96739),d=(n(28714),n(80184)),h=(0,r.forwardRef)((function(t,e){var n=t.onActive,r=t.onClose,h=t.onRestore,p=t.onMaximize,v=t.onMinimize;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.Z,{sx:{position:"relative"},children:(0,d.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,d.jsx)(i.Z,{variant:"h6",component:"div",sx:{flexGrow:1,cursor:"move"},className:"window-title",onClick:n,children:t.title}),(0,d.jsx)(u.Z,{color:"inherit",onClick:v,children:(0,d.jsx)(o.Z,{})}),t.isMaximized?(0,d.jsx)(u.Z,{color:"inherit",onClick:h,children:(0,d.jsx)(c.Z,{})}):(0,d.jsx)(u.Z,{color:"inherit",onClick:p,children:(0,d.jsx)(l.Z,{})}),(0,d.jsx)(u.Z,{color:"inherit",onClick:r,children:(0,d.jsx)(f.Z,{})})]})}),t.children]})}));e.default=h},16118:function(t,e,n){n.r(e);var r=n(1413),a=n(70885),s=n(15671),i=n(43144),u=n(60136),o=n(98557),c=n(72791),l=n(1250),f=n(28714),d=n(19935),h=n(19218),p=n(80184),v=window.JSONEditor,m=function(t){(0,u.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"build",value:function(){var t=this,e=(this.value,this);this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title);var n=this.options.disks;this.disks=n;var s=document.createElement("div");this.container.append(s),this.view_root=l.createRoot(s),this.rix_init_flag=!1;var i=function(e,n){e.preventDefault(),t.setValue(n,!1,!1)};if(this.used_disks=(0,f.rix_make_watch_data)({used:[],cur_path:""}),this.parent.parent&&this.parent.parent.schema.uniqueItems){var u=this.parent.parent;this.jsoneditor.watch(u.path,(function(){var e=u.getValue().map((function(t){return t.path}));t.used_disks.set("used",e)}))}this.set_model=function(t){if(e.parent&&e.parent.jsoneditor){var n=e.parent.jsoneditor.getEditor(e.parent.path+".model");if(n&&e.disks){var r=t,a=e.disks.filter((function(t){return t.path==r}))[0];a&&n.setValue(a.model)}}},this.used_disks.watch("cur_path",this.set_model);var o=this.defaults.global_data,v=function(){var e=(0,c.useState)([]),s=(0,a.Z)(e,2),u=s[0],l=s[1],f=(0,c.useState)(""),v=(0,a.Z)(f,2),m=v[0],x=v[1];return n||(n=o.get("blockdevices")),t.disks=n,(0,c.useEffect)((function(){var e=function(t){var e=n.map((function(t){return t.path}));e=e.filter((function(e){return 0==t.filter((function(t){return t==e})).length})),l(e)};t.used_disks.watch("used",e);var r;return e(t.used_disks.get("used")),r=t.used_disks.get("cur_path"),x(r),t.set_model(r),function(){t.used_disks.unwatch("used",e)}}),[]),(0,p.jsx)(d.Z,{freeSolo:!0,value:m,onChange:i,options:u,getOptionLabel:function(t){var e=n.filter((function(e){return e.path==t}))[0];return e?"".concat(e.model,"(").concat(e.size,") at ").concat(e.path):""},renderInput:function(t){return(0,p.jsx)(h.Z,(0,r.Z)((0,r.Z)({},t),{},{label:"\u9009\u62e9\u78c1\u76d8"}))}})};this.view_root.render((0,p.jsx)(v,{}))}},{key:"setValue",value:function(t,e,n){this.value=t,this.refreshValue(),this.used_disks.set("cur_path",t),this.onChange(!0)}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){var t=this;this.used_disks.unwatch(this.set_model),setTimeout((function(){t.view_root.unmount()}))}}]),n}(v.AbstractEditor),x=(0,c.forwardRef)((function(t,e){var n=t.schema,a=(t.callbacks,(0,c.useRef)(null)),s=(0,c.useRef)(null),i=(0,f.useData)().global_data;v.defaults.editors.disk_select=m,v.defaults.global_data=i,v.defaults.resolvers.unshift((function(t){if("string"===t.type&&"disk_select"===t.format)return"disk_select"})),(0,c.useEffect)((function(){var e=(0,r.Z)({schema:n,theme:"bootstrap4"},t.options);return a.current=new v(s.current,e),a.current.on("ready",(function(){t.data&&a.current.setValue(t.data)})),function(){a.current&&a.current.destroy()}}),[n,t]);var u=function(){return a.current.getValue()};return(0,c.useImperativeHandle)(e,(function(){return{getValue:u}})),(0,p.jsx)("div",(0,r.Z)({ref:s},t))}));e.default=x},27475:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var r=n(1413),a=n(70885),s=n(72791),i=(n(11687),n(48605),n(51707)),u=n(98530),o=n(39124),c=n(43896),l=n(80184),f={samba:{label:"samba",rix_type:"component",path:"components/samba.js"},docker:{label:"docker",rix_type:"component",path:"components/Docker.js"}};function d(){var t=s.useState("samba"),e=(0,a.Z)(t,2),n=e[0],d=e[1],h=function(t){var e=f[n];if(e){var a=(0,r.Z)((0,r.Z)({},t),e);return(0,l.jsx)(i.default,(0,r.Z)((0,r.Z)({},a),{},{value:n}))}return(0,l.jsx)(l.Fragment,{})};return(0,l.jsxs)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:[(0,l.jsx)(o.Z,{value:n,onChange:function(t,e){t.preventDefault(),d(e)},"aria-label":"setting",children:Object.keys(f).map((function(t){return(0,l.jsx)(c.Z,{value:t,label:f[t].label},t)}))}),(0,l.jsx)(h,{},n)]})}},48605:function(t,e,n){n.r(e),n.d(e,{default:function(){return v}});var r=n(1413),a=n(74165),s=n(15861),i=n(70885),u=n(72791),o=n(34251),c=n(16118),l=n(28714),f=n(19727),d=n(36151),h=n(55113),p=n(80184);function v(t){var e=(0,l.useData)(),n=(e.global_data,e.api,(0,u.useState)("")),v=(0,i.Z)(n,2),m=v[0],x=v[1],Z=(0,u.useState)({type:"string",format:"textarea",title:"samba\u914d\u7f6e",default:"",options:{input_height:"500px"}}),k=(0,i.Z)(Z,2),_=k[0],g=(k[1],(0,u.useRef)(null)),b=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.get_config();case 2:e=t.sent,x(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,u.useEffect)((function(){b()}),[]);var w=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var e,n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=g.current.getValue(),t.next=4,o.default.save_config(e);case 4:n=t.sent,x(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("update samba error",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.restat();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(h.default,(0,r.Z)((0,r.Z)({title:"\u5171\u4eab\u670d\u52a1\u5668"},t),{},{children:(0,p.jsxs)(f.Z,{style:{width:"100vh",height:"100%"},children:[(0,p.jsx)(c.default,{schema:_,data:m,ref:g,style:{width:"100vh",height:"100%"}}),(0,p.jsx)(d.Z,{onClick:w,children:"\u66f4\u65b0"}),(0,p.jsx)(d.Z,{onClick:j,children:"\u91cd\u542f"})]})}))})}},34251:function(t,e,n){n.r(e);var r=n(74165),a=n(15861),s=n(11687),i={get_config:function(){return(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.config_file({op:"get",filename:"/etc/samba/smb.conf"});case 2:if(0!=(e=t.sent).ret){t.next=7;break}return t.abrupt("return",e.data);case 7:throw e;case 8:case"end":return t.stop()}}),t)})))()},save_config:function(t){return(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.config_file({op:"put",filename:"/etc/samba/smb.conf",data:t});case 2:if(0!=(n=e.sent).ret){e.next=5;break}return e.abrupt("return",n.data);case 5:throw n;case 6:case"end":return e.stop()}}),e)})))()},start:function(){return(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={command:"systemctl",args:["start","smbd.service"]},t.next=3,s.default.run_command(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},stop:function(){return(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={command:"systemctl",args:["stop","smbd.service"]},t.next=3,s.default.run_command(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},restart:function(){var t=this;return(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.start();case 2:return e.next=4,t.stop();case 4:case"end":return e.stop()}}),e)})))()}};e.default=i},96739:function(t,e,n){var r=n(76189),a=n(80184);e.Z=(0,r.Z)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")}}]);
//# sourceMappingURL=475.47908430.chunk.js.map